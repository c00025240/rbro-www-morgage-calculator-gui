@use '../../_tokens.scss';

.ms-header {
	display: flex;
	align-items: center;
	width: 100%;
	background: var(--color-bg);
	border-bottom: 1px solid var(--color-border);
	position: fixed;
	top: 0px;
	z-index: 100;
	height: 120px;
	box-shadow: var(--shadow-lg);
	transition: box-shadow 0.2s ease, background-color 0.2s ease;
	
	@media (max-width: 1239px) { 
		height: auto; 
		padding: 12px var(--space-3, 16px); 
		box-shadow: none; 
	}
	
	&__container { 
		display: flex; 
		align-items: center; 
		justify-content: space-between; 
		width: 100%; 
		max-width: 1440px; 
		margin: 0 auto; 
		padding: 0 var(--space-4, 32px); 
		
		@media (max-width: 1239px) { 
			width: 100%; 
			padding: 0; 
			margin: 0; 
			gap: var(--space-2, 12px); 
			flex-wrap: wrap; 
			justify-content: flex-start; 
		} 
		
		@media (min-width: 1240px) { 
			max-width: none; 
			margin: 0; 
			padding: 0; 
			width: 100%; 
			position: relative; 
		} 
	}
	
	&__left { 
		display: flex; 
		flex-direction: row; 
		align-items: center; 
		gap: var(--space-3, 16px); 
		min-width: 0; 
		
		@media (max-width: 1239px) { 
			gap: var(--space-2, 12px); 
			flex: 1 1 auto; 
			flex-wrap: wrap; 
		}
		
		@media (min-width: 1240px) {
			position: absolute;
			// Align exactly with left panel content start
			// Formula: layout padding + centering offset (if content is narrower than panel) + content left padding
			// Left content has: max-width 800px, margin 0 auto (centered), padding 0 var(--space-4, 2rem)
			left: calc(24px + max(0px, (35vw - 800px) / 2) + var(--space-4, 2rem));
			top: 50%;
			transform: translateY(-50%);
			z-index: 1;
		}
		
		// Responsive adjustments - match exact layout padding from ms-simulator-page__desktop-layout
		@media (min-width: 1240px) and (max-width: 1440px) {
			// Layout padding: var(--space-2, 1rem), content padding: var(--space-4, 2rem)
			left: calc(var(--space-2, 1rem) + max(0px, (35vw - 800px) / 2) + var(--space-4, 2rem));
		}
		
		@media (min-width: 1240px) and (max-width: 1360px) {
			// Layout padding: 0, content padding: var(--space-4, 2rem)
			left: calc(max(0px, (35vw - 800px) / 2) + var(--space-4, 2rem));
		}
		
		// Note: left-content padding stays var(--space-4, 2rem) at all desktop sizes
		// Only layout padding changes, so no need for 1280px breakpoint adjustment
	}
	
	&__logo { 
		height: 40px; 
		width: auto; 
		cursor: pointer; 
		transition: opacity 0.2s ease; 
		flex-shrink: 0; 
		
		@media (max-width: 1023px) { 
			height: 32px; 
		} 
		
		&:hover { 
			opacity: 0.8; 
		} 
		
		&:focus { 
			outline: 2px solid var(--focus-border); 
			outline-offset: 2px; 
		} 
	}
	
	&__back-button { 
		flex-shrink: 0; 
	}
	
	&__title { 
		margin: 0; 
		color: inherit; 
		overflow: hidden; 
		text-overflow: ellipsis; 
		white-space: nowrap; 
		max-width: 100%; 
		min-width: 0; 
		font-family: var(--font-family-primary, "Amalia"), sans-serif; 
		font-size: var(--font-size-4xl, 2rem); 
		font-weight: var(--font-weight-normal, 400); 
		line-height: var(--line-height-tight, 1.25); 
		letter-spacing: -0.01em; 
		
		@media (max-width: 1023px) { 
			display: none; 
		} 
		
		&:focus { 
			outline: 2px solid var(--focus-border); 
			outline-offset: 2px; 
		} 
	}
	
	&__title-container { 
		display: flex; 
		flex-direction: column; 
		gap: 0; 
		
		// Mobile/Tablet version: inside __left
		&--mobile {
			@media (max-width: 1239px) { 
				flex: 1 1 auto; 
				min-width: 0; 
			}
			
			@media (min-width: 1240px) {
				display: none; // Hide on desktop
			}
		}
		
		// Desktop version: absolutely positioned relative to __container
		&--desktop {
			@media (max-width: 1239px) {
				display: none; // Hide on mobile/tablet
			}
			
			// Base positioning for all desktop sizes
			@media (min-width: 1240px) { 
				position: absolute; 
				top: 50%; 
				transform: translateY(-50%); 
				max-width: none; 
				z-index: 1;
				margin: 0;
				padding: 0;
			}
			
			// Responsive left positioning - match exact layout and right-content padding
			// Order matters: more specific (smaller ranges) must come AFTER less specific ones
			// This ensures CSS cascade applies the correct value for each resolution
			// Note: right-content has a 24px spacer before the grid, so we align with the actual content start
			// Formula: layout padding + 35vw + content padding (spacer is inside content, so already accounted for)
			
			// Default for largest screens (>1440px)
			@media (min-width: 1441px) {
				// Layout padding: 24px, content padding: var(--space-4, 2rem) = 32px
				// Total: 24px + 35vw + 32px
				left: calc(5px + 35vw + var(--space-4, 2rem));
			}
			
			// 1361px to 1440px: layout padding 1rem (16px), content padding 1.5rem (24px)
			@media (min-width: 1361px) and (max-width: 1440px) {
				// Layout padding: var(--space-2, 1rem) = 16px, content padding: var(--space-3, 1.5rem) = 24px
				// Total: 16px + 35vw + 24px
				left: calc(5px + 35vw + var(--space-3, 1.5rem));
			}
			
			// 1281px to 1360px: layout padding 0, content padding 1rem (16px)
			@media (min-width: 1281px) and (max-width: 1360px) {
				// Layout padding: 0, content padding: var(--space-2, 1rem) = 16px
				// Total: 35vw + 16px
				left: calc(35vw + var(--space-2, 1rem));
			}
			
			// 1240px to 1280px: layout padding 0, content padding 0
			@media (min-width: 1240px) and (max-width: 1280px) {
				// Layout padding: 0, content padding: 0
				// Total: 35vw
				left: calc(35vw);
			} 
		}
	}
	
	&__page-title { 
		margin: 0; 
		padding: 0;
		font-family: var(--font-family-primary, "Amalia"), sans-serif; 
		font-weight: var(--font-weight-medium, 500); 
		letter-spacing: -0.01em; 
		color: var(--color-text, inherit); 
		line-height: 1.1; 
		font-size: 32px; 
		
		@media (max-width: 1239px) { 
			font-size: 22px; 
			line-height: 1.2; 
			white-space: normal; 
		} 
		
		@media (max-width: 1023px) { 
			font-size: 18px; 
			line-height: 1.2; 
		} 
		
		@media (min-width: 1240px) { 
			font-size: 34px; 
			text-align: left; 
			white-space: nowrap; 
		} 
	}

	// Desktop / large screens: show full title with bank name
	&__page-title--desktop {
		display: block;

		@media (max-width: 1023px) {
			display: none;
		}
	}

	// Mobile / tablet: shorter title without bank name
	&__page-title--mobile {
		display: none;

		@media (max-width: 1023px) {
			display: block;
		}
	}
	
	&__subtitle { 
		margin: 0; 
		margin-top: var(--space-1, 4px); 
		font-family: var(--font-family-primary, "Amalia"), sans-serif; 
		font-weight: var(--font-weight-regular, 400); 
		letter-spacing: -0.01em; 
		color: var(--color-text, inherit); 
		line-height: 1.1; 
		font-size: 20px; 
		
		@media (max-width: 1239px) { 
			font-size: 16px; 
			line-height: 1.2; 
			white-space: normal; 
		} 
		
		@media (max-width: 1023px) { 
			font-size: 14px; 
			line-height: 1.2; 
			margin-top: var(--space-0-5, 2px); 
		} 

		// Tablet: reduce gap between h1 and h2 to match mobile spacing
		@media (min-width: 768px) and (max-width: 1239px) {
			margin-top: var(--space-0-5, 2px);
		} 
		
		@media (min-width: 1240px) { 
			font-size: 20px; 
		} 
	}
	
	&__right { 
		display: flex; 
		align-items: center; 
		gap: var(--space-3, 16px); 
		flex-shrink: 0; 
		
		@media (max-width: 1239px) { 
			width: 100%; 
			justify-content: flex-start; 
		} 
	}
	
	&__desktop-actions { 
		display: flex; 
		align-items: center; 
		gap: var(--space-3, 16px); 
		
		@media (max-width: 1023px) { 
			display: none; 
		} 
	}
	
	&__action { 
		flex-shrink: 0; 
		
		&--mobile-only { 
			display: none; 
			
			@media (max-width: 1023px) { 
				display: inline-flex; 
			} 
		} 
	}
	
	&--surface-light { 
		background: var(--color-bg); 
		border-bottom-color: var(--color-border); 
		
		.ms-header__title { 
			color: var(--color-text); 
		} 
	}
	
	&--surface-dark { 
		background: var(--color-bg); 
		border-bottom-color: var(--overlay-border, var(--color-border)); 
		box-shadow: var(--shadow-lg); 
		
		.ms-header__title { 
			color: var(--color-text); 
		} 
		
		@media (max-width: 1023px) { 
			box-shadow: none; 
		} 
	}
	
	@media (prefers-contrast: high) { 
		border-bottom-width: 2px; 
		
		.ms-header__title { 
			font-weight: var(--font-weight-bold, 700); 
		} 
	}
	
	@media (prefers-reduced-motion: reduce) { 
		transition: none; 
	}
}
