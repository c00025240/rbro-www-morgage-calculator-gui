.ms-web-summary-card {
  height: 100%;
  width: 100%;
  box-sizing: border-box;

  ms-card,
  .ms-card { height: 100%; width: 100% !important; display: flex; box-sizing: border-box; }

  &__content { display: flex; flex-direction: column; gap: 16px; width: 100%; height: 100%; box-sizing: border-box; }

  &__stack-12 { display: flex; flex-direction: column; gap: 12px; }
}

.ms-web-summary-card {
	&__content { display: flex; flex-direction: column; gap: 20px; padding: 24px; }
	&__stack-12 { display: flex; flex-direction: column; gap: 12px; }
	&__actions-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
	&__footnote { margin-top: 8px; font-family: var(--font-family-primary, 'Amalia'), sans-serif; font-weight: 400; font-size: 14px; line-height: 16px; color: var(--text-default); }

	/* Three-column offers grid */
	&__offers-grid {
		display: grid;
		grid-template-columns: repeat(3, minmax(0, 1fr));
		gap: var(--space-3, 1.5rem);
		align-items: start;
	}

	/* Responsive column count classes */
	&__offers-grid.cols-3 { grid-template-columns: repeat(3, 1fr); justify-content: initial; }
	&__offers-grid.cols-2 { grid-template-columns: repeat(2, 1fr); justify-content: start; }
	&__offers-grid.cols-1 { grid-template-columns: 1fr; justify-content: start; }

	/* Remove reliance on :has() for browser support */
	/* previous :has() variants removed in favor of explicit classes */

	/* Base KPI styles - must come before media queries */
	&__kpi { margin: var(--space-2, 8px) 0; }
	&__kpi-label { font-size: var(--font-size-lg, 1.125rem); color: var(--color-text-secondary); margin-bottom: var(--space-1, 4px); }
	&__kpi-amount { display: flex; align-items: baseline; gap: 8px; }
	&__kpi-amount .value { font-size: 3rem; font-weight: var(--font-weight-bold, 700); color: var(--color-text-primary); letter-spacing: 0.5px; }
	&__kpi-amount .currency { font-size: var(--font-size-base, 1rem); color: var(--color-text-primary); }

	/* Responsive tweaks */
	@media (max-width: 1024px) {
		&__offers-grid.cols-2 { grid-template-columns: 1fr; }
	}
	@media (max-width: 640px) {
		&__offers-grid.cols-1 { grid-template-columns: 1fr; }
	}
	@media (max-width: 1600px) {
		&__kpi-amount .value { font-size: 2.5rem; }
	}
	@media (max-width: 1360px) {
		&__content { padding: 20px; }
		&__offers-grid { gap: var(--space-2, 1rem); }
		&__kpi-amount .value { font-size: 2.5rem; }
	}
	@media (max-width: 1280px) {
		&__content { padding: 14px; }
		&__stack-12 { gap: 10px; }
		&__offers-grid { gap: var(--space-1, 0.5rem); }
		&__kpi-amount .value { font-size: 2.5rem; }
		&__kpi-amount .currency { font-size: 0.875rem; }
		&__secondary-info { font-size: 0.95rem; }
		&__actions-row { gap: 8px; }
	}
	@media (max-width: 1220px) {
		&__content { padding: 12px; }
		&__stack-12 { gap: 8px; }
		&__offers-grid { gap: var(--space-0-5, 0.5rem); }
		&__offer-title,
		&__offer-heading,
		&__kpi-label { font-size: 0.95rem; }
		&__kpi-amount .value { font-size: 2rem; }
	}

	&__offer-col { display: flex; flex-direction: column; gap: var(--space-2, 8px); width: 100%; }
	&__offer-title { font-weight: 600; font-size: var(--font-size-base, 1rem); color: var(--color-text-primary); margin-bottom: var(--space-1, 0.5rem); }
	&__offer-heading { font-weight: 600; font-size: var(--font-size-base, 1rem); color: var(--color-text-primary); margin: var(--space-2, 8px) 0; }
	&__offer-heading--primary { background: var(--bg-accent); color: var(--rbro-white); border-radius: var(--radius-lg); padding: 4px 8px; display: inline-block; }
	&__offer-heading--neutral { color: var(--color-text-primary); }
	&__personalized-title {
		font-weight: 700;
		font-size: var(--font-size-base, 1rem);
		color: var(--rbro-white);
		background: var(--bg-accent);
		border-top-left-radius: var(--radius-lg);
		border-top-right-radius: var(--radius-lg);
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
		padding: 8px 12px;
		margin: 0 calc(var(--space-2, 16px) * -1) var(--space-2, 8px);
		display: block;
	}
	&__secondary-info { display: flex; gap: 8px; align-items: baseline; color: var(--color-text-secondary); font-size: var(--font-size-base, 1rem); margin-bottom: var(--space-2, 8px); }
	&__secondary-info .label { color: var(--color-text-secondary); }
	&__secondary-info .value { font-weight: var(--font-weight-semibold, 600); color: var(--color-text-primary); }

	/* Info note under extra details */
	&__info-note { display: flex; align-items: flex-start; gap: 6px; margin-top: 4px; margin-bottom: 8px; color: var(--color-text-primary); font-size: var(--font-size-sm, 0.875rem); line-height: 1.3; }
	&__info-note-icon { display: inline-flex; width: 18px; height: 18px; flex: 0 0 18px; margin-top: 0; }
	&__info-note-text { display: inline; }

	/* Expandable details styles */
	/* Summary box aligned to amount combos appearance */
	&__extra { display: flex; flex-direction: column; gap: 8px; padding-top: 0; margin: 0; }

	/* Combined container (second amounts + summary) */
	&__combined-box {
		background: var(--color-bg-secondary);
		border-radius: var(--radius-lg);
		padding: 2px var(--space-2, 16px) var(--space-2, 16px);
		box-sizing: border-box;
		color: var(--color-text-secondary);
		overflow: hidden;

		/* Reduce space beneath amounts inside this combined box */
		ms-amount-combo { margin-bottom: 2px; }
	}
	@media (max-width: 1280px) {
		&__combined-box {
			padding: 2px 12px 12px;
		}
	}
	@media (max-width: 1220px) {
		&__combined-box {
			padding: 2px 10px 10px;
		}
	}
	
	/* Separator line between amounts and summary */
	&__separator {
		height: 1px;
		background-color: var(--color-text-secondary);
		margin: 2px 0 0;
		opacity: 0.3;
	}
	
	&__extra-box {
		background: transparent;
		border-radius: var(--radius-lg);
		padding: 0;
		border: none;
		color: var(--color-text-secondary);
		box-sizing: border-box;
	}
	&__extra-header { display: flex; align-items: center; justify-content: space-between; cursor: pointer; user-select: none; }
	&__extra-title { font-weight: 600; color: var(--color-text-secondary); font-size: var(--font-size-body-s, 14px); line-height: 1.3; }
	&__extra-caret { display: inline-flex; align-items: center; justify-content: center; color: var(--color-text-secondary); }
	.caret-svg { display: block; color: var(--color-text-secondary); }
	&__extra-list { display: flex; flex-direction: column; gap: var(--space-1-5, 12px); }
	&__extra-row { display: flex; flex-direction: column; gap: 4px; margin: 0; }
	&__extra-label { font-size: var(--font-size-sm, 0.875rem); color: var(--color-text-secondary); }
	&__extra-value { font-size: var(--font-size-base, 1rem); font-weight: var(--font-weight-semibold, 600); color: var(--color-text-primary); }
	&__extra-spacer { height: 1px; background: var(--color-border); margin: var(--space-3, 1.5rem) 0; }

	/* Make primary button fill the entire row */
	&__stack-12 > ms-button-primary { width: 100%; display: block; }
	&__stack-12 > ms-button-primary .ms-button-primary__btn { width: 100%; max-width: none; }

	/* Make each secondary button fill its half (grid column) */
	&__actions-row > ms-button-secondary { width: 100%; display: block; }
	&__actions-row > ms-button-secondary .ms-button-secondary__btn { width: 100%; max-width: none; }

	&--surface-dark {
		.ms-web-summary-card__footnote { color: var(--text-dark-accent, var(--text-dark-accent)); }
	}
} 