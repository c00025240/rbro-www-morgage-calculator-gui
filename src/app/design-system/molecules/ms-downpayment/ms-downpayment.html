<ms-card-outside-title
  [title]="label"
  [hasHelper]="true"
  [helperText]="helperText">
</ms-card-outside-title>

<ms-card>
  <div class="ms-downpayment__content">
    <div class="ms-downpayment__field-section">
      <ms-text-field-custom
        [label]="''"
        type="number"
        [value]="value()"
        placeholder="0"
        [suffixText]="currency"
        [disabled]="disabled()"
        [error]="error"
        (valueChange)="onValueChange($event)">
      </ms-text-field-custom>
    </div>

    <div class="ms-downpayment__slider-section">
      <div class="ms-downpayment__slider"
           (touchstart)="onSliderTouchStart($event)"
           (touchmove)="onSliderTouchMove($event)">
        <div class="ms-downpayment__slider-track"></div>
        <div class="ms-downpayment__slider-progress" [style.width.%]="progressPercentage"></div>
        <div class="ms-downpayment__slider-handle" [style.left.%]="progressPercentage"></div>
        <input
          type="range"
          class="ms-downpayment__slider-input"
          [min]="min"
          [max]="max"
          [step]="step"
          [value]="currentValue"
          [disabled]="disabled()"
          [attr.aria-label]="'Down payment slider'"
          (input)="onSliderChange($event)"
          (touchstart)="onSliderInputTouchStart($event)"
          (touchmove)="onSliderInputTouchMove($event)">
      </div>
    </div>

    <!-- Error message (priority over info note) -->
    <div class="ms-downpayment__info-note ms-downpayment__info-note--error" 
         *ngIf="error && errorMessage" 
         role="alert" 
         aria-live="assertive">
      <div class="ms-downpayment__info-note-content">
        <span class="ms-downpayment__info-note-icon" 
              role="img" 
              aria-label="Avertisment"></span>
        <span class="ms-downpayment__info-note-text">{{ errorMessage }}</span>
      </div>
    </div>

    <!-- Info note about additional amount for discount -->
    <div class="ms-downpayment__info-note" 
         [class.ms-downpayment__info-note--success]="infoNoteType === 'success'"
         *ngIf="!error && infoNote" 
         role="note" 
         aria-live="polite">
      <div class="ms-downpayment__info-note-content">
        <img [src]="infoNoteType === 'success' ? 'assets/icons/checkmark-ring Style=outlined.svg' : 'assets/icons/info-outlined.svg'" 
             [alt]="infoNoteType === 'success' ? 'Succes' : 'InformaÈ›ie'" 
             class="ms-downpayment__info-note-icon"
             width="20" 
             height="20">
        <span class="ms-downpayment__info-note-text">{{ infoNote }}</span>
      </div>
    </div>
  </div>
</ms-card>


